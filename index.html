<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindly</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        
        <!-- ========== MAIN MENU ========== -->
        <div id="main-menu">
            <!-- Header with logo and streak -->
            <header class="main-header">
                <div class="logo-section">
                    <span class="logo-icon">üéÆ</span>
                    <div class="logo-text">
                        <h1>Mindly</h1>
                        <span class="tagline">Level up your brain</span>
                    </div>
                </div>
                <div class="header-actions">
                    <div class="streak-badge">
                        <span class="streak-icon">üî•</span>
                        <span class="streak-count" id="streak">0</span>
                    </div>
                    <button class="theme-btn" onclick="toggleThemeMenu()">
                        <span>üé®</span>
                    </button>
                </div>
            </header>

            <!-- Theme Popup Menu -->
            <div id="theme-popup" class="theme-popup hidden">
                <div class="theme-popup-header">
                    <span>üé® Themes</span>
                    <button class="theme-close" onclick="toggleThemeMenu()">√ó</button>
                </div>
                <div class="theme-options">
                    <button class="theme-option" onclick="setTheme('normal')">
                        <span class="theme-preview normal-preview"></span>
                        <span class="theme-name">Normal</span>
                    </button>
                    <button class="theme-option" onclick="setTheme('japanese')">
                        <span class="theme-preview japanese-preview"></span>
                        <span class="theme-name">Japanese</span>
                    </button>
                    <button class="theme-option" onclick="setTheme('basic')">
                        <span class="theme-preview basic-preview"></span>
                        <span class="theme-name">Basic</span>
                    </button>
                    <button class="theme-option" onclick="setTheme('dark')">
                        <span class="theme-preview dark-preview"></span>
                        <span class="theme-name">Dark</span>
                    </button>
                    <button class="theme-option" onclick="setTheme('car')">
                        <span class="theme-preview car-preview"></span>
                        <span class="theme-name">Racing</span>
                    </button>
                    <button class="theme-option" onclick="setTheme('retro')">
                        <span class="theme-preview retro-preview"></span>
                        <span class="theme-name">Retro</span>
                    </button>
                </div>
            </div>

            <!-- Player Stats Card - Stretched -->
            <section class="player-card">
                <div class="player-top">
                <div class="avatar">
                        <img src="images/pfp.png" alt="Profile" onerror="this.src='images/pfp.jpg'">
                    </div>
                    <div class="player-details">
                        <span class="player-title">Apprentice</span>
                        <div class="level-badge">
                            <span class="level-icon">‚≠ê</span>
                            <span>Level <span id="level">1</span></span>
                        </div>
                    </div>
                    <div class="player-rank">
                        <span class="rank-label">Rank</span>
                        <span class="rank-value">#1</span>
                    </div>
                </div>
                <div class="player-middle">
                    <div class="xp-container">
                        <div class="xp-info">
                            <span class="xp-label">Experience Points</span>
                            <span class="xp-text" id="xp-text">0 / 30 XP</span>
                        </div>
                        <div class="xp-bar">
                            <div class="xp-fill" id="xp-fill"></div>
                        </div>
                        <span class="xp-hint">+30 XP to next level</span>
                    </div>
                </div>
                <div class="player-badges">
                    <div class="badge-item">
                        <span class="badge-icon">üåü</span>
                        <span class="badge-name">Starter</span>
                    </div>
                    <div class="badge-item locked">
                        <span class="badge-icon">üîí</span>
                        <span class="badge-name">Scholar</span>
                    </div>
                    <div class="badge-item locked">
                        <span class="badge-icon">üîí</span>
                        <span class="badge-name">Master</span>
                    </div>
                </div>
            </section>

            <!-- Bottom Row: Stats Left, Play Right -->
            <div class="bottom-row">
                <!-- Quick Stats - Left Side -->
                <section class="quick-stats">
                    <h3 class="stats-title">üìä Stats</h3>
                    <div class="stat-box">
                        <span class="stat-icon">‚ö°</span>
                        <div class="stat-content">
                            <span class="stat-value" id="total-xp">0</span>
                            <span class="stat-label">Total XP</span>
                        </div>
                    </div>
                    <div class="stat-box">
                        <span class="stat-icon">‚úÖ</span>
                        <div class="stat-content">
                            <span class="stat-value" id="questions-answered">0</span>
                            <span class="stat-label">Answered</span>
                        </div>
                    </div>
                    <div class="stat-box">
                        <span class="stat-icon">üéØ</span>
                        <div class="stat-content">
                            <span class="stat-value" id="accuracy">0%</span>
                            <span class="stat-label">Accuracy</span>
                        </div>
                    </div>
                </section>

                <!-- Play Section - Right Side -->
                <section class="play-section">
                    <h3 class="play-title">üéÆ Play</h3>
                    <button class="play-card" onclick="showSubjectSelection()">
                        <div class="play-icon-wrapper">
                            <span class="play-icon">‚ñ∂</span>
                        </div>
                        <div class="play-info">
                            <span class="play-name">Start Learning</span>
                            <span class="play-desc">Choose a subject</span>
                        </div>
                        <div class="play-meta">
                            <span class="meta-xp">+5 XP</span>
                        </div>
                    </button>
                    <div class="play-hint">
                        <span>Tap to start learning!</span>
                    </div>
                </section>
            </div>

            <!-- Footer -->
            <footer class="menu-footer">
                <span>Keep learning, keep growing üå±</span>
            </footer>
        </div>

        <!-- ========== SUBJECT SELECTION SCREEN ========== -->
        <div id="subject-screen" class="hidden">
            <div class="subject-header">
                <button class="back-btn" onclick="returnToMenu()">‚Üê</button>
                <h1>What do you want to learn?</h1>
            </div>
            
            <div class="subject-grid">
                <!-- Math Subject -->
                <button class="subject-card math-card" onclick="selectSubject('math')">
                    <div class="subject-icon">üìù</div>
                    <div class="subject-info">
                        <span class="subject-name">Math</span>
                        <span class="subject-desc">Addition, Subtraction, Multiplication, Division</span>
                    </div>
                    <div class="subject-meta">
                        <span>3 Questions</span>
                        <span>+5 XP each</span>
                    </div>
                </button>

                <!-- Science Subject -->
                <button class="subject-card science-card" onclick="showScienceUnits()">
                    <div class="subject-icon">üî¨</div>
                    <div class="subject-info">
                        <span class="subject-name">Sciences</span>
                        <span class="subject-desc">7 Unit√©s: Mati√®re, √ânergie, Espace et plus!</span>
                    </div>
                    <div class="subject-meta">
                        <span>7 Unit√©s</span>
                        <span>+5 XP chaque</span>
                    </div>
                </button>
            </div>

            <div class="subject-hint">
                <span>üåü Pick a subject to begin!</span>
            </div>
        </div>

        <!-- ========== SCIENCE UNIT SELECTION ========== -->
        <div id="science-units-screen" class="hidden">
            <div class="subject-header">
                <button class="back-btn" onclick="backToSubjectsFromUnits()">‚Üê</button>
                <h1>üî¨ Choisis un sujet de sciences</h1>
            </div>
            
            <div class="units-grid">
                <button class="unit-card" onclick="selectScienceUnit('matiere')">
                    <span class="unit-icon">‚öõÔ∏è</span>
                    <span class="unit-name">La mati√®re</span>
                </button>
                <button class="unit-card" onclick="selectScienceUnit('energie')">
                    <span class="unit-icon">‚ö°</span>
                    <span class="unit-name">√ânergie</span>
                </button>
                <button class="unit-card" onclick="selectScienceUnit('climat')">
                    <span class="unit-icon">üåç</span>
                    <span class="unit-name">Climat et m√©t√©o</span>
                </button>
                <button class="unit-card" onclick="selectScienceUnit('systemes-vivants')">
                    <span class="unit-icon">ü´Ä</span>
                    <span class="unit-name">Syst√®mes vivants</span>
                </button>
                <button class="unit-card" onclick="selectScienceUnit('espace')">
                    <span class="unit-icon">üåå</span>
                    <span class="unit-name">Espace</span>
                </button>
                <button class="unit-card" onclick="selectScienceUnit('informatique')">
                    <span class="unit-icon">üíª</span>
                    <span class="unit-name">Informatique</span>
                </button>
                <button class="unit-card" onclick="selectScienceUnit('methodes')">
                    <span class="unit-icon">üî¨</span>
                    <span class="unit-name">M√©thodes scientifiques</span>
                </button>
            </div>
            
            <div class="subject-hint">
                <span>üéØ Chaque sujet a 10-23 questions!</span>
            </div>
        </div>

        <!-- ========== MODE SELECTION SCREEN ========== -->
        <div id="mode-screen" class="hidden">
            <div class="mode-header">
                <button class="back-btn" onclick="backToSubjects()">‚Üê</button>
                <h1>Choose Your Mode</h1>
            </div>
            
            <div class="mode-grid">
                <!-- Learn Mode -->
                <button class="mode-card learn-card" onclick="startMode('learn')">
                    <div class="mode-icon">üìö</div>
                    <div class="mode-info">
                        <span class="mode-name">Learn Mode</span>
                        <span class="mode-desc">Take your time, no pressure</span>
                    </div>
                    <div class="mode-meta">
                        <span>+5 XP per answer</span>
                    </div>
                </button>

                <!-- Speedrun Mode -->
                <button class="mode-card speedrun-card" onclick="startMode('speedrun')">
                    <div class="mode-icon">‚è±Ô∏è</div>
                    <div class="mode-info">
                        <span class="mode-name">Speedrun Mode</span>
                        <span class="mode-desc">10 questions, timer gets faster!</span>
                    </div>
                    <div class="mode-meta">
                        <span>10s ‚Üí 9s ‚Üí 8s...</span>
                    </div>
                </button>

                <!-- Fun Mode -->
                <button class="mode-card fun-card" onclick="startMode('fun')">
                    <div class="mode-icon">üéâ</div>
                    <div class="mode-info">
                        <span class="mode-name">Fun Mode</span>
                        <span class="mode-desc">Celebrations & animations!</span>
                    </div>
                    <div class="mode-meta">
                        <span>+5 XP per answer</span>
                    </div>
                </button>

                <!-- Challenge Mode -->
                <button class="mode-card challenge-card" onclick="startMode('challenge')">
                    <div class="mode-icon">üí™</div>
                    <div class="mode-info">
                        <span class="mode-name">Challenge Mode</span>
                        <span class="mode-desc">3 lives only - don't fail!</span>
                    </div>
                    <div class="mode-meta">
                        <span>Bonus XP for survival!</span>
                    </div>
                </button>
            </div>

            <div class="mode-hint">
                <span>üéÆ Pick a mode to start!</span>
            </div>
        </div>

        <!-- ========== LESSON SCREEN ========== -->
        <div id="lesson-screen" class="hidden">
            <div class="lesson-header">
                <button class="back-btn" onclick="backToModes()">‚Üê</button>
                <h1 id="lesson-title">Basic Math</h1>
                <div class="header-stats">
                    <!-- Timer for Speedrun Mode -->
                    <div class="timer-display hidden" id="timer-display">
                        <span class="timer-icon">‚è±Ô∏è</span>
                        <span class="timer-value" id="timer-value">0.0s</span>
                    </div>
                    <!-- Lives for Challenge Mode -->
                    <div class="lives-display hidden" id="lives-display">
                        <span class="lives-hearts" id="lives-hearts">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
                    </div>
                    <!-- Mode Badge -->
                    <span class="mode-badge" id="mode-badge">üìö Learn</span>
                    <span class="header-level">Lv.<span id="lesson-level">1</span></span>
                    <div class="header-xp-bar">
                        <div class="xp-fill" id="lesson-xp-fill"></div>
                    </div>
                    <span class="header-xp" id="lesson-xp-text">0/30</span>
                </div>
            </div>

            <!-- Fun Mode Celebration Container -->
            <div class="celebration-container hidden" id="celebration-container">
                <div class="celebration-emoji" id="celebration-emoji"></div>
                <div class="celebration-message" id="celebration-message"></div>
            </div>

            <!-- Question Card -->
            <div class="question-card" id="question-card">
                <p class="progress-text" id="progress">Question 1 of 3</p>
                <h2 class="question-text" id="question-text"></h2>
                <div class="options" id="options"></div>
                <!-- Explanation (shown after answer in Learn/Fun modes) -->
                <div class="explanation-container hidden" id="explanation-container">
                    <div class="explanation-box" id="explanation-box">
                        <span class="explanation-icon" id="explanation-icon">üí°</span>
                        <p class="explanation-text" id="explanation-text"></p>
                    </div>
                    <button class="ok-btn" id="ok-btn" onclick="nextQuestionManual()">OK ‚Üí</button>
                </div>
            </div>

            <!-- Completion Card -->
            <div class="completion-card hidden" id="completion-card">
                <div class="icon">üéâ</div>
                <h2 id="completion-title">Lesson Complete!</h2>
                <p id="score"></p>
                <p class="xp-earned" id="xp-earned">+0 XP</p>
                <p class="bonus-xp hidden" id="bonus-xp"></p>
                <p class="time-result hidden" id="time-result"></p>
                <p class="lives-result hidden" id="lives-result"></p>
                <button class="home-btn" onclick="returnToMenu()">Continue</button>
            </div>

            <!-- Game Over Card (Challenge Mode) -->
            <div class="gameover-card hidden" id="gameover-card">
                <div class="icon">üíî</div>
                <h2>Game Over!</h2>
                <p id="gameover-score"></p>
                <p class="gameover-message">You ran out of lives!</p>
                <button class="home-btn" onclick="returnToMenu()">Try Again</button>
            </div>
        </div>

    </div>

    <script src="js/app.js"></script>
    <script src="js/lessons.js"></script>
    <script>
        // ===========================================
        // LESSON CONFIGURATION
        // ===========================================
        const NUM_QUESTIONS = 3;
        const NUM_OPTIONS = 4;

        // Operators with display symbols and functions
        const operators = [
            { symbol: '+', calc: (a, b) => a + b },
            { symbol: '‚àí', calc: (a, b) => a - b },
            { symbol: '√ó', calc: (a, b) => a * b },
            { symbol: '√∑', calc: (a, b) => a / b }
        ];

        // ===========================================
        // HELPER FUNCTIONS
        // ===========================================
        
        function randomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // ===========================================
        // QUESTION GENERATOR
        // ===========================================
        
        function generateQuestion() {
            const op = operators[randomInt(0, operators.length - 1)];
            let num1, num2, answer;

            if (op.symbol === '√∑') {
                answer = randomInt(1, 10);
                num2 = randomInt(1, 10);
                num1 = answer * num2;
            } else if (op.symbol === '‚àí') {
                num1 = randomInt(5, 20);
                num2 = randomInt(1, num1);
                answer = op.calc(num1, num2);
            } else {
                num1 = randomInt(1, 12);
                num2 = randomInt(1, 12);
                answer = op.calc(num1, num2);
            }

            const options = new Set([answer]);
            while (options.size < NUM_OPTIONS) {
                const offset = randomInt(-5, 5);
                const distractor = answer + offset;
                if (distractor !== answer && distractor >= 0) {
                    options.add(distractor);
                }
            }

            const shuffledOptions = shuffle([...options]);
            return {
                question: `What is ${num1} ${op.symbol} ${num2}?`,
                options: shuffledOptions.map(String),
                correct: shuffledOptions.indexOf(answer)
            };
        }

        function generateMathLesson() {
            const questions = [];
            for (let i = 0; i < NUM_QUESTIONS; i++) {
                questions.push(generateQuestion());
            }
            return {
                id: "math-1",
                title: "Basic Math",
                subject: "Math",
                questions: questions
            };
        }

        // ===========================================
        // SCIENCE LESSON - Grade 5 Weather (Alberta Curriculum)
        // ===========================================
        
        /*
        üìö LESSON SUMMARY (Grade 5 - Weather Watch)
        
        Weather is what's happening in the sky RIGHT NOW - is it sunny, rainy, 
        or snowy today? Scientists called meteorologists use special tools to 
        measure and predict weather:
        
        üå°Ô∏è Thermometer - measures temperature (how hot or cold)
        üéà Barometer - measures air pressure (helps predict storms!)
        üí® Anemometer - measures wind speed (how fast wind blows)
        üß≠ Wind Vane - shows wind direction (which way wind comes from)
        üåßÔ∏è Rain Gauge - measures how much rain falls
        
        Clouds tell us about weather too! Fluffy cumulus clouds mean nice 
        weather, while dark cumulonimbus clouds bring thunderstorms!
        */
        
        // Question bank - 30 questions about Grade 5 Weather
        const weatherQuestionBank = [
            // WEATHER INSTRUMENTS (10 questions)
            {
                question: "Which weather instrument measures wind SPEED?",
                options: ["Thermometer", "Barometer", "Anemometer", "Rain Gauge"],
                correct: 2
            },
            {
                question: "What does a THERMOMETER measure?",
                options: ["Wind speed", "Temperature", "Rainfall", "Air pressure"],
                correct: 1
            },
            {
                question: "Which tool would a meteorologist use to find out WHERE the wind is coming from?",
                options: ["Anemometer", "Wind Vane", "Thermometer", "Rain Gauge"],
                correct: 1
            },
            {
                question: "A BAROMETER measures which of these?",
                options: ["Temperature", "Humidity", "Air Pressure", "Wind Speed"],
                correct: 2
            },
            {
                question: "What tool collects and measures how much rain has fallen?",
                options: ["Barometer", "Anemometer", "Thermometer", "Rain Gauge"],
                correct: 3
            },
            {
                question: "A HYGROMETER measures the amount of _____ in the air.",
                options: ["Oxygen", "Water vapor (humidity)", "Carbon dioxide", "Dust"],
                correct: 1
            },
            {
                question: "Which instrument has spinning cups that catch the wind?",
                options: ["Thermometer", "Barometer", "Anemometer", "Hygrometer"],
                correct: 2
            },
            {
                question: "What does a wind vane look like?",
                options: ["A spinning cup", "An arrow that points", "A glass tube", "A bucket"],
                correct: 1
            },
            {
                question: "Scientists who study and predict weather are called:",
                options: ["Biologists", "Meteorologists", "Geologists", "Astronomers"],
                correct: 1
            },
            {
                question: "Weather satellites help us by:",
                options: ["Making it rain", "Taking pictures of clouds from space", "Stopping storms", "Creating wind"],
                correct: 1
            },

            // CLOUDS (8 questions)
            {
                question: "What are the BIG, fluffy clouds that look like cotton balls called?",
                options: ["Stratus", "Cirrus", "Cumulus", "Fog"],
                correct: 2
            },
            {
                question: "STRATUS clouds are flat and spread out like a ______.",
                options: ["Cotton ball", "Blanket or sheet", "Tall tower", "Feather"],
                correct: 1
            },
            {
                question: "Which clouds are thin, wispy, and very HIGH in the sky?",
                options: ["Cumulus", "Stratus", "Cirrus", "Cumulonimbus"],
                correct: 2
            },
            {
                question: "CUMULONIMBUS clouds bring:",
                options: ["Sunny days", "Thunderstorms and heavy rain", "Light fog", "Dry weather"],
                correct: 1
            },
            {
                question: "What are clouds made of?",
                options: ["Cotton", "Smoke", "Tiny water droplets or ice crystals", "Dust only"],
                correct: 2
            },
            {
                question: "FOG is basically a cloud that:",
                options: ["Is very high up", "Touches the ground", "Is always dark", "Only forms at night"],
                correct: 1
            },
            {
                question: "If you see big, dark clouds forming, you should expect:",
                options: ["A sunny afternoon", "Rain or a storm", "Snow in summer", "Nothing to change"],
                correct: 1
            },
            {
                question: "Cirrus clouds are made mostly of:",
                options: ["Water droplets", "Ice crystals", "Dust", "Smoke"],
                correct: 1
            },

            // PRECIPITATION & WATER CYCLE (6 questions)
            {
                question: "Which is NOT a type of precipitation?",
                options: ["Rain", "Snow", "Wind", "Hail"],
                correct: 2
            },
            {
                question: "HAIL is made of:",
                options: ["Raindrops", "Balls of ice", "Snowflakes", "Fog"],
                correct: 1
            },
            {
                question: "In the water cycle, what is EVAPORATION?",
                options: ["Water falling as rain", "Water turning into vapor and rising", "Clouds forming", "Water soaking into ground"],
                correct: 1
            },
            {
                question: "When water vapor cools and forms clouds, this is called:",
                options: ["Evaporation", "Precipitation", "Condensation", "Collection"],
                correct: 2
            },
            {
                question: "SLEET is a mix of:",
                options: ["Rain and sunshine", "Rain and ice pellets", "Snow and fog", "Hail and wind"],
                correct: 1
            },
            {
                question: "Where does the energy come from that powers the water cycle?",
                options: ["The Moon", "The Sun", "The wind", "The ocean"],
                correct: 1
            },

            // WEATHER VS CLIMATE & GENERAL (6 questions)
            {
                question: "What is the difference between WEATHER and CLIMATE?",
                options: ["They mean the same thing", "Weather is daily, climate is the pattern over many years", "Climate is for today only", "Weather is only about rain"],
                correct: 1
            },
            {
                question: "A barometer shows dropping air pressure. What might happen?",
                options: ["Sunny weather is coming", "A storm might be coming", "It will get very hot", "Nothing changes"],
                correct: 1
            },
            {
                question: "Alberta's climate is known for being:",
                options: ["Tropical and wet", "Cold winters and warm summers", "Always rainy", "Desert-like all year"],
                correct: 1
            },
            {
                question: "What causes wind to blow?",
                options: ["Trees moving", "Differences in air pressure", "Cars driving", "Birds flying"],
                correct: 1
            },
            {
                question: "HIGH air pressure usually brings:",
                options: ["Storms and rain", "Clear, sunny weather", "Tornadoes", "Fog only"],
                correct: 1
            },
            {
                question: "Why do we check the weather forecast?",
                options: ["Just for fun", "To plan activities and stay safe", "It's required by law", "To make it rain"],
                correct: 1
            }
        ];

        // Generate a randomized weather lesson with 5 questions
        function generateWeatherLesson() {
            const shuffled = shuffle([...weatherQuestionBank]);
            const selectedQuestions = shuffled.slice(0, 5);
            
            return {
                id: "science-weather-1",
                title: "Weather Watch ‚õÖ",
                subject: "Science",
                questions: selectedQuestions
            };
        }

        // ===========================================
        // ALL SCIENCE UNITS DATA (Alberta Grade 5 Curriculum - French Immersion)
        // ===========================================
        
        const scienceUnits = {
            // UNIT 1: La mati√®re (Matter)
            'matiere': {
                id: "science-matiere",
                title: "‚öõÔ∏è La mati√®re",
                subject: "Science",
                questions: [
                    {
                        question: "Selon le mod√®le particulaire, comment les particules sont-elles arrang√©es dans un solide?",
                        options: ["Elles sont tr√®s √©loign√©es et bougent librement", "Elles sont tr√®s proches les unes des autres et vibrent sur place", "Elles n'existent pas dans un solide", "Elles sont proches mais glissent les unes sur les autres"],
                        correct: 1,
                        explanation: "Dans un solide, les particules sont tr√®s rapproch√©es, bien organis√©es et vibrent sur place sans se d√©placer librement."
                    },
                    {
                        question: "Comment les particules se comportent-elles dans un liquide?",
                        options: ["Elles sont fixes et ne bougent pas", "Elles sont tr√®s √©loign√©es et bougent tr√®s vite", "Elles sont proches mais peuvent glisser les unes sur les autres", "Elles disparaissent"],
                        correct: 2,
                        explanation: "Dans un liquide, les particules sont proches mais pas aussi organis√©es que dans un solide. Elles peuvent glisser les unes sur les autres, ce qui permet au liquide de couler."
                    },
                    {
                        question: "Comment les particules d'un gaz sont-elles arrang√©es selon le mod√®le particulaire?",
                        options: ["Tr√®s proches et organis√©es en rang√©es", "Proches et glissantes", "Tr√®s √©loign√©es les unes des autres et se d√©placent rapidement dans toutes les directions", "Elles ne bougent pas du tout"],
                        correct: 2,
                        explanation: "Dans un gaz, les particules sont tr√®s √©loign√©es les unes des autres et se d√©placent rapidement dans toutes les directions."
                    },
                    {
                        question: "Quel est l'effet des forces attractives sur les particules d'un solide?",
                        options: ["Les forces attractives sont tr√®s faibles, les particules bougent librement", "Les forces attractives sont tr√®s fortes, gardant les particules ensemble et en place", "Il n'y a pas de forces attractives dans un solide", "Les forces repoussent les particules"],
                        correct: 1,
                        explanation: "Dans un solide, les forces attractives entre les particules sont tr√®s fortes, ce qui les maintient en place et donne au solide sa forme fixe."
                    },
                    {
                        question: "Dans quel √©tat de la mati√®re les forces attractives entre les particules sont-elles les plus faibles?",
                        options: ["Solide", "Liquide", "Gaz", "Les forces sont les m√™mes dans tous les √©tats"],
                        correct: 2,
                        explanation: "Dans un gaz, les forces attractives entre les particules sont les plus faibles, c'est pourquoi les particules sont tr√®s √©loign√©es et se d√©placent librement."
                    },
                    {
                        question: "Quel instrument utilise-t-on pour mesurer la masse d'un objet en sciences?",
                        options: ["Un thermom√®tre", "Un cylindre gradu√©", "Une balance", "Un m√®tre"],
                        correct: 2,
                        explanation: "On utilise une balance pour mesurer la masse des solides et des liquides."
                    },
                    {
                        question: "Quelle est l'unit√© SI standard pour mesurer la masse?",
                        options: ["Le litre (L)", "Le m√®tre (m)", "Le gramme (g) ou le kilogramme (kg)", "Le degr√© Celsius (¬∞C)"],
                        correct: 2,
                        explanation: "L'unit√© SI pour la masse est le gramme (g) ou le kilogramme (kg)."
                    },
                    {
                        question: "Quel instrument utilise-t-on pour mesurer le volume d'un liquide?",
                        options: ["Une balance", "Un cylindre gradu√©", "Un thermom√®tre", "Un aimant"],
                        correct: 1,
                        explanation: "On utilise un cylindre gradu√© (ou √©prouvette gradu√©e) pour mesurer le volume des liquides."
                    },
                    {
                        question: "Qu'est-ce que la densit√©?",
                        options: ["La taille d'un objet", "La quantit√© de mati√®re (masse) contenue dans un volume donn√©", "La temp√©rature d'un objet", "La couleur d'un objet"],
                        correct: 1,
                        explanation: "La densit√© est la quantit√© de mati√®re (masse) contenue dans un espace donn√© (volume). Un objet dense a beaucoup de masse dans un petit volume."
                    },
                    {
                        question: "Deux cubes ont le m√™me volume. Le cube A a une masse de 50 g et le cube B a une masse de 100 g. Lequel est le plus dense?",
                        options: ["Le cube A", "Le cube B", "Ils ont la m√™me densit√©", "On ne peut pas savoir"],
                        correct: 1,
                        explanation: "Le cube B est plus dense car il a plus de masse (100 g) dans le m√™me volume que le cube A (50 g)."
                    },
                    {
                        question: "Comment peut-on comparer directement la densit√© de deux liquides?",
                        options: ["En les chauffant", "En les versant doucement ensemble et en observant lequel coule au fond", "En les go√ªtant", "En les pesant sans mesurer leur volume"],
                        correct: 1,
                        explanation: "Si on verse deux liquides ensemble, le liquide le plus dense coulera au fond, et le moins dense flottera sur le dessus."
                    },
                    {
                        question: "Selon le mod√®le particulaire, pourquoi les gaz sont-ils moins denses que les solides?",
                        options: ["Les gaz ont plus de particules", "Les particules de gaz sont plus grosses", "Les particules de gaz sont tr√®s √©loign√©es les unes des autres, donc il y a moins de masse dans le m√™me volume", "Les gaz n'ont pas de particules"],
                        correct: 2,
                        explanation: "Dans un gaz, les particules sont tr√®s espac√©es. Il y a donc moins de particules (moins de masse) dans un m√™me volume, ce qui rend les gaz moins denses."
                    },
                    {
                        question: "Qu'arrive-t-il quand on comprime (presse) de l'air dans une seringue ferm√©e?",
                        options: ["L'air ne peut pas √™tre comprim√©", "Le volume d'air diminue car les particules peuvent se rapprocher", "L'air se transforme en eau", "La seringue explose toujours"],
                        correct: 1,
                        explanation: "L'air est compressible car les particules de gaz sont tr√®s espac√©es. Quand on pousse le piston, les particules se rapprochent et le volume diminue."
                    },
                    {
                        question: "L'eau est-elle facilement compressible?",
                        options: ["Oui, l'eau se comprime facilement", "Non, l'eau est presque incompressible", "Oui, mais seulement quand elle est chaude", "Oui, mais seulement quand elle est froide"],
                        correct: 1,
                        explanation: "L'eau (un liquide) est presque incompressible car ses particules sont d√©j√† tr√®s proches les unes des autres et ne peuvent pas √™tre rapproch√©es davantage."
                    },
                    {
                        question: "Pourquoi l'air est-il compressible mais pas l'eau?",
                        options: ["L'eau est plus lourde", "L'air a beaucoup d'espace entre ses particules, l'eau non", "L'air n'a pas de particules", "L'eau est plus chaude"],
                        correct: 1,
                        explanation: "L'air (gaz) a beaucoup d'espace entre ses particules, ce qui permet de les rapprocher. L'eau (liquide) a des particules d√©j√† tr√®s proches, donc on ne peut pas les comprimer davantage."
                    },
                    {
                        question: "Que se passe-t-il avec les particules quand un solide fond et devient un liquide?",
                        options: ["Les particules disparaissent", "Les particules restent les m√™mes mais les forces attractives s'affaiblissent, permettant aux particules de glisser", "De nouvelles particules sont cr√©√©es", "Les particules deviennent plus grosses"],
                        correct: 1,
                        explanation: "Quand un solide fond, les particules gagnent de l'√©nergie et les forces attractives s'affaiblissent. Les particules restent proches mais peuvent maintenant glisser les unes sur les autres."
                    },
                    {
                        question: "Quelle r√®gle de s√©curit√© est importante lors de la mesure de la masse avec une balance?",
                        options: ["Toujours porter des lunettes de soleil", "S'assurer que la balance est sur une surface plane et √† z√©ro avant de commencer", "Secouer la balance avant de l'utiliser", "Toujours peser les liquides directement sur la balance sans contenant"],
                        correct: 1,
                        explanation: "Avant de mesurer, il faut s'assurer que la balance est sur une surface plane et calibr√©e √† z√©ro pour obtenir une mesure pr√©cise."
                    },
                    {
                        question: "Comment doit-on lire la mesure du volume dans un cylindre gradu√©?",
                        options: ["En regardant par le dessus", "En pla√ßant les yeux au niveau du m√©nisque (le bas de la courbe du liquide)", "En devinant", "En regardant par le dessous"],
                        correct: 1,
                        explanation: "On doit placer les yeux au m√™me niveau que le m√©nisque (la courbe au bas de la surface du liquide) pour lire la mesure correctement."
                    },
                    {
                        question: "Un objet a une masse de 200 g et un volume de 100 mL. Un autre objet a une masse de 200 g et un volume de 50 mL. Lequel est le plus dense?",
                        options: ["L'objet de 100 mL", "L'objet de 50 mL", "Ils ont la m√™me densit√©", "On ne peut pas d√©terminer la densit√©"],
                        correct: 1,
                        explanation: "L'objet de 50 mL est plus dense car il a la m√™me masse (200 g) dans un plus petit volume (50 mL vs 100 mL). Plus de masse dans moins d'espace = plus dense."
                    },
                    {
                        question: "Quelle est l'unit√© SI pour mesurer le volume d'un liquide?",
                        options: ["Le gramme (g)", "Le millilitre (mL) ou le litre (L)", "Le centim√®tre (cm)", "Le kilogramme (kg)"],
                        correct: 1,
                        explanation: "L'unit√© SI pour le volume d'un liquide est le millilitre (mL) ou le litre (L)."
                    }
                ],
                xpPerQuestion: 5
            },

            // UNIT 2: √ânergie (Energy)
            'energie': {
                id: "science-energie",
                title: "‚ö° √ânergie",
                subject: "Science",
                questions: [
                    {
                        question: "Quelles sont les quatre forces qui agissent sur un objet en vol?",
                        options: ["Pouss√©e, tra√Æn√©e, portance et poids", "Gravit√©, magn√©tisme, friction et √©lectricit√©", "Vent, pluie, neige et soleil", "Vitesse, direction, distance et temps"],
                        correct: 0,
                        explanation: "Les quatre forces du vol sont: la pouss√©e (vers l'avant), la tra√Æn√©e (vers l'arri√®re), la portance (vers le haut) et le poids/gravit√© (vers le bas)."
                    },
                    {
                        question: "Qu'est-ce que la pouss√©e (thrust)?",
                        options: ["La force qui tire un objet vers le sol", "La force qui propulse un objet vers l'avant", "La force qui ralentit un objet", "La force qui soul√®ve un objet"],
                        correct: 1,
                        explanation: "La pouss√©e est la force qui propulse un objet vers l'avant dans l'air. Par exemple, un moteur d'avion cr√©e la pouss√©e."
                    },
                    {
                        question: "Qu'est-ce que la tra√Æn√©e (drag)?",
                        options: ["La force qui pousse vers l'avant", "La force de l'air qui r√©siste au mouvement et ralentit l'objet", "La force qui soul√®ve l'objet", "La force de la gravit√©"],
                        correct: 1,
                        explanation: "La tra√Æn√©e est la force de r√©sistance de l'air qui s'oppose au mouvement de l'objet et le ralentit. Elle agit dans la direction oppos√©e √† la pouss√©e."
                    },
                    {
                        question: "Qu'est-ce que la portance (lift)?",
                        options: ["La force qui pousse un objet vers le bas", "La force vers le haut qui permet √† un objet de s'√©lever dans l'air", "La force qui pousse un objet vers l'avant", "La force de friction"],
                        correct: 1,
                        explanation: "La portance est la force vers le haut cr√©√©e par le mouvement de l'air autour des ailes. Pour voler, la portance doit √™tre √©gale ou sup√©rieure au poids."
                    },
                    {
                        question: "Pour qu'un avion reste en vol, que doit-il se passer avec les forces?",
                        options: ["La tra√Æn√©e doit √™tre plus grande que la pouss√©e", "Le poids doit √™tre plus grand que la portance", "La portance doit √™tre √©gale ou plus grande que le poids, et la pouss√©e doit surmonter la tra√Æn√©e", "Toutes les forces doivent √™tre √©limin√©es"],
                        correct: 2,
                        explanation: "Pour voler: la portance ‚â• poids (pour rester en l'air) et la pouss√©e ‚â• tra√Æn√©e (pour avancer)."
                    },
                    {
                        question: "Comment un oiseau utilise-t-il les forces du vol?",
                        options: ["Il utilise seulement la gravit√©", "Ses ailes cr√©ent la portance et la pouss√©e en battant", "Il utilise un moteur comme un avion", "Il flotte dans l'air sans aucune force"],
                        correct: 1,
                        explanation: "Un oiseau bat des ailes pour cr√©er √† la fois la pouss√©e (mouvement vers l'avant) et la portance (mouvement vers le haut). La forme de ses ailes aide aussi √† cr√©er la portance."
                    },
                    {
                        question: "Quelle forme d'aile aide √† cr√©er la portance?",
                        options: ["Plate et carr√©e", "Courb√©e sur le dessus et plus plate en dessous (profil a√©rodynamique)", "Ronde comme un ballon", "Triangulaire pointue"],
                        correct: 1,
                        explanation: "Un profil a√©rodynamique (courb√© sur le dessus, plat en dessous) force l'air √† voyager plus vite au-dessus de l'aile, cr√©ant une zone de basse pression qui g√©n√®re la portance."
                    },
                    {
                        question: "Qu'est-ce que la force de flottabilit√© (pouss√©e d'Archim√®de)?",
                        options: ["La force qui pousse un objet vers le fond de l'eau", "La force vers le haut exerc√©e par un liquide sur un objet immerg√©", "La force de la gravit√©", "La force du vent sur l'eau"],
                        correct: 1,
                        explanation: "La force de flottabilit√© est la force vers le haut que l'eau (ou un autre fluide) exerce sur un objet plac√© dedans."
                    },
                    {
                        question: "Quand est-ce qu'un objet flotte dans l'eau?",
                        options: ["Quand son poids est plus grand que la force de flottabilit√©", "Quand la force de flottabilit√© est √©gale ou plus grande que son poids", "Quand il est tr√®s gros", "Quand il est de couleur claire"],
                        correct: 1,
                        explanation: "Un objet flotte quand la force de flottabilit√© (vers le haut) est √©gale ou sup√©rieure √† son poids (vers le bas)."
                    },
                    {
                        question: "Pourquoi un bateau en acier peut-il flotter m√™me si l'acier est plus dense que l'eau?",
                        options: ["Parce que l'acier devient l√©ger dans l'eau", "Parce que la forme creuse du bateau d√©place un grand volume d'eau, cr√©ant assez de force de flottabilit√©", "Parce que le bateau a de la peinture sp√©ciale", "Parce que l'eau de mer est magique"],
                        correct: 1,
                        explanation: "La forme creuse du bateau d√©place un grand volume d'eau. L'eau d√©plac√©e cr√©e une force de flottabilit√© suffisante pour supporter le poids du bateau."
                    },
                    {
                        question: "Quelle est la diff√©rence entre une ressource √©nerg√©tique renouvelable et non renouvelable?",
                        options: ["Les renouvelables sont plus ch√®res", "Les renouvelables se r√©g√©n√®rent naturellement, les non renouvelables s'√©puisent", "Les non renouvelables sont meilleures pour l'environnement", "Il n'y a pas de diff√©rence"],
                        correct: 1,
                        explanation: "Les ressources renouvelables (soleil, vent, eau) se r√©g√©n√®rent naturellement. Les non renouvelables (p√©trole, charbon, gaz naturel) existent en quantit√© limit√©e et mettent des millions d'ann√©es √† se former."
                    },
                    {
                        question: "Lequel de ces choix est une source d'√©nergie NON renouvelable?",
                        options: ["L'√©nergie solaire", "L'√©nergie √©olienne", "Le gaz naturel", "L'√©nergie hydro√©lectrique"],
                        correct: 2,
                        explanation: "Le gaz naturel est un combustible fossile non renouvelable. Il met des millions d'ann√©es √† se former et existe en quantit√© limit√©e."
                    },
                    {
                        question: "Lequel de ces choix est une source d'√©nergie renouvelable?",
                        options: ["Le charbon", "Le p√©trole", "L'√©nergie √©olienne (du vent)", "Le gaz naturel"],
                        correct: 2,
                        explanation: "L'√©nergie √©olienne est renouvelable car le vent est une ressource naturelle qui ne s'√©puise pas."
                    },
                    {
                        question: "Quel est un avantage des combustibles fossiles?",
                        options: ["Ils ne polluent pas", "Ils produisent beaucoup d'√©nergie et sont fiables", "Ils sont renouvelables", "Ils ne produisent pas de gaz √† effet de serre"],
                        correct: 1,
                        explanation: "Les combustibles fossiles produisent beaucoup d'√©nergie de fa√ßon fiable et constante. Cependant, ils polluent et ne sont pas renouvelables."
                    },
                    {
                        question: "Quel est un inconv√©nient de l'√©nergie solaire?",
                        options: ["Elle pollue beaucoup", "Elle ne fonctionne pas la nuit et d√©pend de la m√©t√©o", "Elle est non renouvelable", "Elle n'existe pas au Canada"],
                        correct: 1,
                        explanation: "L'√©nergie solaire ne produit pas d'√©lectricit√© la nuit et est moins efficace par temps nuageux. Elle d√©pend donc des conditions m√©t√©orologiques."
                    },
                    {
                        question: "Quelle est la principale source d'√©nergie utilis√©e en Alberta?",
                        options: ["L'√©nergie nucl√©aire", "L'√©nergie solaire", "Les combustibles fossiles (p√©trole et gaz naturel)", "L'√©nergie hydro√©lectrique"],
                        correct: 2,
                        explanation: "L'Alberta est une province riche en p√©trole et gaz naturel. Les combustibles fossiles sont sa principale source d'√©nergie."
                    },
                    {
                        question: "Quelle province du Canada utilise principalement l'√©nergie hydro√©lectrique?",
                        options: ["L'Alberta", "La Saskatchewan", "Le Qu√©bec", "Le Manitoba"],
                        correct: 2,
                        explanation: "Le Qu√©bec produit la grande majorit√© de son √©lectricit√© gr√¢ce √† l'√©nergie hydro√©lectrique (barrages)."
                    },
                    {
                        question: "Qu'est-ce que la biomasse comme source d'√©nergie?",
                        options: ["L'√©nergie du vent", "L'√©nergie obtenue √† partir de mati√®res organiques (plantes, d√©chets, bois)", "L'√©nergie nucl√©aire", "L'√©nergie des vagues"],
                        correct: 1,
                        explanation: "La biomasse est l'√©nergie obtenue √† partir de mati√®res organiques comme le bois, les r√©sidus agricoles et les d√©chets alimentaires."
                    },
                    {
                        question: "Lors de la construction d'un appareil volant, quel facteur est important pour r√©duire la tra√Æn√©e?",
                        options: ["Utiliser une forme large et plate", "Utiliser une forme a√©rodynamique (profil√©e)", "Rendre l'objet aussi lourd que possible", "Ajouter beaucoup de d√©corations"],
                        correct: 1,
                        explanation: "Une forme a√©rodynamique (profil√©e, lisse) r√©duit la tra√Æn√©e car l'air passe plus facilement autour de l'objet."
                    },
                    {
                        question: "Un objet coule dans l'eau douce mais flotte dans l'eau sal√©e. Pourquoi?",
                        options: ["L'eau sal√©e est plus chaude", "L'eau sal√©e est plus dense que l'eau douce, donc la force de flottabilit√© est plus grande", "L'eau sal√©e est plus l√©g√®re", "L'objet change de masse dans l'eau sal√©e"],
                        correct: 1,
                        explanation: "L'eau sal√©e est plus dense que l'eau douce (√† cause du sel dissous). Un fluide plus dense exerce une force de flottabilit√© plus grande, ce qui peut faire flotter un objet qui coulerait dans l'eau douce."
                    }
                ],
                xpPerQuestion: 5
            },

            // UNIT 3: Syst√®mes terrestres ‚Äî Climat et m√©t√©o
            'climat': {
                id: "science-climat",
                title: "üåç Climat et m√©t√©o",
                subject: "Science",
                questions: [
                    {
                        question: "Quelle est la diff√©rence entre la m√©t√©o et le climat?",
                        options: ["La m√©t√©o et le climat sont la m√™me chose", "La m√©t√©o d√©crit les conditions atmosph√©riques √† court terme; le climat d√©crit les tendances sur une longue p√©riode (30+ ans)", "Le climat change chaque jour", "La m√©t√©o ne change jamais"],
                        correct: 1,
                        explanation: "La m√©t√©o d√©crit les conditions atmosph√©riques quotidiennes (temp√©rature, pluie, vent). Le climat d√©crit les tendances moyennes sur de longues p√©riodes (g√©n√©ralement 30 ans ou plus)."
                    },
                    {
                        question: "Lequel est un exemple de m√©t√©o et non de climat?",
                        options: ["Les hivers en Alberta sont g√©n√©ralement froids", "Il pleut aujourd'hui √† Calgary", "Le d√©sert du Sahara est chaud et sec", "Vancouver re√ßoit beaucoup de pluie en moyenne"],
                        correct: 1,
                        explanation: "\"Il pleut aujourd'hui √† Calgary\" d√©crit une condition atmosph√©rique sp√©cifique et temporaire, c'est donc de la m√©t√©o. Les autres options d√©crivent des tendances √† long terme (climat)."
                    },
                    {
                        question: "Quelles sont les principales zones climatiques de la Terre?",
                        options: ["Jour et nuit", "Tropical, temp√©r√© et polaire", "Chaud, moyen et froid", "Montagne, plaine et oc√©an"],
                        correct: 1,
                        explanation: "Les trois principales zones climatiques sont: tropicale (proche de l'√©quateur, chaude), temp√©r√©e (entre les tropiques et les p√¥les) et polaire (pr√®s des p√¥les, froide)."
                    },
                    {
                        question: "Dans quelle zone climatique se trouve l'Alberta?",
                        options: ["Tropicale", "Temp√©r√©e / continentale", "Polaire", "D√©sertique"],
                        correct: 1,
                        explanation: "L'Alberta est dans la zone temp√©r√©e/continentale avec des hivers froids, des √©t√©s chauds et des variations saisonni√®res importantes."
                    },
                    {
                        question: "Quel facteur influence le plus le climat d'une r√©gion?",
                        options: ["La couleur du sol", "La latitude (distance de l'√©quateur)", "Le nombre d'animaux", "La couleur des maisons"],
                        correct: 1,
                        explanation: "La latitude est le facteur le plus important. Plus on est proche de l'√©quateur, plus il fait chaud; plus on s'en √©loigne vers les p√¥les, plus il fait froid."
                    },
                    {
                        question: "Comment l'altitude affecte-t-elle le climat?",
                        options: ["Plus on monte en altitude, plus il fait chaud", "Plus on monte en altitude, plus il fait froid", "L'altitude n'a aucun effet sur le climat", "Plus on monte en altitude, plus il pleut toujours"],
                        correct: 1,
                        explanation: "La temp√©rature diminue avec l'altitude. C'est pourquoi les sommets des montagnes sont couverts de neige m√™me en √©t√©."
                    },
                    {
                        question: "Comment la proximit√© d'un oc√©an affecte-t-elle le climat?",
                        options: ["Les r√©gions c√¥ti√®res ont des temp√©ratures plus extr√™mes", "Les r√©gions c√¥ti√®res ont des temp√©ratures plus mod√©r√©es (hivers plus doux, √©t√©s plus frais)", "L'oc√©an n'a aucun effet sur le climat", "Les r√©gions c√¥ti√®res sont toujours plus froides"],
                        correct: 1,
                        explanation: "L'eau se r√©chauffe et se refroidit plus lentement que la terre. Les r√©gions c√¥ti√®res ont donc des temp√©ratures plus mod√©r√©es (hivers plus doux, √©t√©s plus frais) compar√©es aux r√©gions int√©rieures."
                    },
                    {
                        question: "Quel instrument mesure la temp√©rature de l'air?",
                        options: ["Le barom√®tre", "Le thermom√®tre", "L'an√©mom√®tre", "Le pluviom√®tre"],
                        correct: 1,
                        explanation: "Le thermom√®tre mesure la temp√©rature de l'air, g√©n√©ralement en degr√©s Celsius (¬∞C) au Canada."
                    },
                    {
                        question: "Quel instrument mesure la pression atmosph√©rique?",
                        options: ["Le thermom√®tre", "L'an√©mom√®tre", "Le barom√®tre", "L'hygrom√®tre"],
                        correct: 2,
                        explanation: "Le barom√®tre mesure la pression atmosph√©rique. Une pression qui baisse peut indiquer l'arriv√©e de mauvais temps."
                    },
                    {
                        question: "Quel instrument mesure la vitesse du vent?",
                        options: ["La girouette", "L'an√©mom√®tre", "Le pluviom√®tre", "Le thermom√®tre"],
                        correct: 1,
                        explanation: "L'an√©mom√®tre mesure la vitesse du vent. La girouette mesure la direction du vent."
                    },
                    {
                        question: "Quel instrument mesure la quantit√© de pluie tomb√©e?",
                        options: ["L'an√©mom√®tre", "Le barom√®tre", "Le pluviom√®tre", "L'hygrom√®tre"],
                        correct: 2,
                        explanation: "Le pluviom√®tre recueille et mesure la quantit√© de pluie (pr√©cipitations) tomb√©e sur une p√©riode donn√©e."
                    },
                    {
                        question: "Quel instrument mesure la direction du vent?",
                        options: ["L'an√©mom√®tre", "La girouette", "Le barom√®tre", "Le thermom√®tre"],
                        correct: 1,
                        explanation: "La girouette indique la direction d'o√π souffle le vent."
                    },
                    {
                        question: "Quel instrument mesure l'humidit√© de l'air?",
                        options: ["Le thermom√®tre", "L'hygrom√®tre", "Le pluviom√®tre", "L'an√©mom√®tre"],
                        correct: 1,
                        explanation: "L'hygrom√®tre mesure l'humidit√© (la quantit√© de vapeur d'eau) dans l'air."
                    },
                    {
                        question: "Pourquoi les pr√©visions m√©t√©orologiques sont-elles importantes?",
                        options: ["Elles ne sont pas vraiment importantes", "Elles aident les gens √† se pr√©parer, assurent la s√©curit√© et aident les agriculteurs √† planifier", "Elles servent seulement √† d√©cider quoi porter", "Elles sont toujours exactes √† 100%"],
                        correct: 1,
                        explanation: "Les pr√©visions m√©t√©o aident √† la s√©curit√© publique (avertissements de temp√™tes), aident les agriculteurs √† planifier (semences, r√©coltes), et permettent aux gens de se pr√©parer."
                    },
                    {
                        question: "Comment les Premi√®res Nations, les M√©tis et les Inuits pr√©disaient-ils traditionnellement la m√©t√©o?",
                        options: ["Avec des ordinateurs et des satellites", "En observant le comportement des animaux, les nuages, le vent et les signes naturels", "Ils ne pr√©disaient pas la m√©t√©o", "En regardant la t√©l√©vision"],
                        correct: 1,
                        explanation: "Les peuples autochtones utilisaient l'observation de la nature: le comportement des animaux, les formations nuageuses, la direction du vent et d'autres signes naturels pour pr√©dire la m√©t√©o."
                    },
                    {
                        question: "Comment le climat de l'Alberta affecte-t-il l'agriculture?",
                        options: ["Il permet de cultiver des fruits tropicaux toute l'ann√©e", "Les hivers longs et froids limitent la saison de croissance; les s√©cheresses et le gel sont des risques", "Il n'a aucun effet sur l'agriculture", "Il est trop chaud pour faire pousser quoi que ce soit"],
                        correct: 1,
                        explanation: "Le climat continental de l'Alberta avec ses hivers longs, le risque de gel tardif au printemps et les s√©cheresses estivales affecte quels types de cultures peuvent pousser et quand."
                    },
                    {
                        question: "Qu'est-ce que l'agriculture de conservation?",
                        options: ["Utiliser le plus de produits chimiques possible", "Des pratiques agricoles qui prot√®gent le sol et l'eau, comme le semis direct et la rotation des cultures", "Construire des mus√©es sur les fermes", "Ne rien cultiver"],
                        correct: 1,
                        explanation: "L'agriculture de conservation utilise des pratiques durables comme le semis direct (ne pas labourer), la rotation des cultures et la couverture du sol pour prot√©ger les ressources naturelles."
                    },
                    {
                        question: "Quel type de nuage est haut, mince et compos√© de cristaux de glace?",
                        options: ["Cumulus", "Cumulonimbus", "Cirrus", "Stratus"],
                        correct: 2,
                        explanation: "Les cirrus sont des nuages hauts, minces et filamenteux, compos√©s de cristaux de glace. Ils indiquent g√©n√©ralement du beau temps mais peuvent annoncer un changement."
                    },
                    {
                        question: "Quel type de nuage est associ√© aux orages violents?",
                        options: ["Cirrus", "Stratus", "Cumulonimbus", "Cumulus"],
                        correct: 2,
                        explanation: "Les cumulonimbus sont de tr√®s grands nuages verticaux associ√©s aux orages, √† la foudre, √† la gr√™le et parfois aux tornades."
                    },
                    {
                        question: "Comment le comportement des animaux peut-il aider √† pr√©dire la m√©t√©o?",
                        options: ["Les animaux peuvent parler et dire le temps qu'il fera", "Certains animaux changent de comportement avant une temp√™te (ex: les oiseaux volent bas, les grenouilles coassent plus)", "Les animaux ne r√©agissent pas √† la m√©t√©o", "Les animaux regardent les pr√©visions √† la t√©l√©"],
                        correct: 1,
                        explanation: "De nombreux animaux sont sensibles aux changements de pression atmosph√©rique et d'humidit√©. Par exemple, les oiseaux volent plus bas avant une temp√™te et certains insectes deviennent plus actifs."
                    },
                    {
                        question: "En comparant le climat de l'Alberta et celui de la Colombie-Britannique c√¥ti√®re, quelle diff√©rence importante y a-t-il?",
                        options: ["Ils ont exactement le m√™me climat", "La C.-B. c√¥ti√®re a des hivers plus doux et plus humides gr√¢ce √† l'influence de l'oc√©an Pacifique", "L'Alberta a des hivers plus doux", "La C.-B. c√¥ti√®re ne re√ßoit jamais de pluie"],
                        correct: 1,
                        explanation: "La c√¥te de la C.-B. b√©n√©ficie de l'effet mod√©rateur de l'oc√©an Pacifique, ce qui lui donne des hivers plus doux et plus humides que l'Alberta, qui a un climat continental avec des hivers plus froids et secs."
                    },
                    {
                        question: "Qu'est-ce qu'une carte m√©t√©orologique montre?",
                        options: ["Seulement les routes et les villes", "Les conditions m√©t√©orologiques actuelles ou pr√©vues (fronts, pression, temp√©rature, pr√©cipitations)", "Les magasins √† proximit√©", "Les r√©sultats sportifs"],
                        correct: 1,
                        explanation: "Une carte m√©t√©orologique montre les conditions atmosph√©riques: syst√®mes de haute et basse pression, fronts chauds et froids, pr√©cipitations, temp√©ratures et vent."
                    },
                    {
                        question: "Qu'est-ce que la r√©colte durable signifie?",
                        options: ["R√©colter tout le plus vite possible", "R√©colter de fa√ßon √† ne pas √©puiser les ressources pour les g√©n√©rations futures", "Ne jamais r√©colter", "R√©colter seulement en hiver"],
                        correct: 1,
                        explanation: "La r√©colte durable signifie pr√©lever des ressources naturelles √† un rythme qui permet leur renouvellement, assurant leur disponibilit√© pour les g√©n√©rations futures."
                    }
                ],
                xpPerQuestion: 5
            },

            // UNIT 4: Syst√®mes vivants (Living Systems)
            'systemes-vivants': {
                id: "science-vivants",
                title: "ü´Ä Syst√®mes vivants",
                subject: "Science",
                questions: [
                    {
                        question: "Quels sont les quatre principaux syst√®mes du corps humain √©tudi√©s en 5e ann√©e?",
                        options: ["Solaire, lunaire, stellaire, plan√©taire", "Digestif, respiratoire, circulatoire et musculosquelettique", "√âlectrique, m√©canique, chimique et nucl√©aire", "Animal, v√©g√©tal, min√©ral et gazeux"],
                        correct: 1,
                        explanation: "Les quatre syst√®mes √©tudi√©s sont le syst√®me digestif, le syst√®me respiratoire, le syst√®me circulatoire et le syst√®me musculosquelettique."
                    },
                    {
                        question: "Quel est le r√¥le principal du syst√®me digestif?",
                        options: ["Transporter le sang", "D√©composer les aliments en nutriments que le corps peut utiliser", "Permettre de respirer", "Prot√©ger les os"],
                        correct: 1,
                        explanation: "Le syst√®me digestif d√©compose les aliments en nutriments (√©nergie, vitamines, min√©raux) que le corps peut absorber et utiliser."
                    },
                    {
                        question: "Quel est le bon ordre du trajet des aliments dans le syst√®me digestif?",
                        options: ["Bouche ‚Üí estomac ‚Üí ≈ìsophage ‚Üí intestin gr√™le ‚Üí gros intestin", "Bouche ‚Üí ≈ìsophage ‚Üí estomac ‚Üí intestin gr√™le ‚Üí gros intestin", "Estomac ‚Üí bouche ‚Üí intestin gr√™le ‚Üí gros intestin ‚Üí ≈ìsophage", "Bouche ‚Üí intestin gr√™le ‚Üí estomac ‚Üí gros intestin ‚Üí ≈ìsophage"],
                        correct: 1,
                        explanation: "Les aliments passent par: la bouche (mastication) ‚Üí l'≈ìsophage (tube vers l'estomac) ‚Üí l'estomac (digestion acide) ‚Üí l'intestin gr√™le (absorption) ‚Üí le gros intestin (eau et d√©chets)."
                    },
                    {
                        question: "O√π la plupart des nutriments sont-ils absorb√©s dans le syst√®me digestif?",
                        options: ["Dans la bouche", "Dans l'estomac", "Dans l'intestin gr√™le", "Dans le gros intestin"],
                        correct: 2,
                        explanation: "L'intestin gr√™le est l'endroit principal o√π les nutriments sont absorb√©s et passent dans le sang pour √™tre distribu√©s dans tout le corps."
                    },
                    {
                        question: "Quel est le r√¥le principal du syst√®me respiratoire?",
                        options: ["Dig√©rer les aliments", "Apporter de l'oxyg√®ne au corps et √©liminer le dioxyde de carbone", "Pomper le sang", "Bouger les muscles"],
                        correct: 1,
                        explanation: "Le syst√®me respiratoire apporte l'oxyg√®ne de l'air dans le corps et √©limine le dioxyde de carbone (d√©chet) du corps."
                    },
                    {
                        question: "Quels sont les organes principaux du syst√®me respiratoire?",
                        options: ["Le c≈ìur, les veines et les art√®res", "Le nez, la trach√©e, les bronches et les poumons", "L'estomac, les intestins et le foie", "Les os, les muscles et les tendons"],
                        correct: 1,
                        explanation: "Le syst√®me respiratoire comprend le nez/bouche, la trach√©e, les bronches et les poumons (o√π se fait l'√©change de gaz)."
                    },
                    {
                        question: "Que se passe-t-il dans les poumons?",
                        options: ["Les aliments sont dig√©r√©s", "L'√©change gazeux: l'oxyg√®ne entre dans le sang et le dioxyde de carbone en sort", "Le sang est fabriqu√©", "Les os se forment"],
                        correct: 1,
                        explanation: "Dans les poumons, l'oxyg√®ne de l'air passe dans le sang (dans les alv√©oles) et le dioxyde de carbone passe du sang √† l'air pour √™tre expir√©."
                    },
                    {
                        question: "Quel est le r√¥le principal du syst√®me circulatoire?",
                        options: ["Respirer", "Transporter le sang, l'oxyg√®ne, les nutriments et les d√©chets √† travers le corps", "Dig√©rer les aliments", "Soutenir le corps"],
                        correct: 1,
                        explanation: "Le syst√®me circulatoire transporte le sang (qui contient l'oxyg√®ne, les nutriments et les d√©chets) √† travers tout le corps."
                    },
                    {
                        question: "Quels sont les organes principaux du syst√®me circulatoire?",
                        options: ["Les poumons, la trach√©e et le nez", "Le c≈ìur, le sang, les art√®res et les veines", "Le cerveau et la moelle √©pini√®re", "Les os et les muscles"],
                        correct: 1,
                        explanation: "Le syst√®me circulatoire comprend le c≈ìur (pompe), le sang, les art√®res (transportent le sang du c≈ìur) et les veines (ram√®nent le sang au c≈ìur)."
                    },
                    {
                        question: "Quel est le r√¥le du c≈ìur?",
                        options: ["Filtrer le sang", "Pomper le sang √† travers tout le corps", "Fabriquer les globules rouges", "Stocker l'oxyg√®ne"],
                        correct: 1,
                        explanation: "Le c≈ìur est un muscle qui agit comme une pompe, envoyant le sang riche en oxyg√®ne vers le corps et le sang pauvre en oxyg√®ne vers les poumons."
                    },
                    {
                        question: "Quelle est la diff√©rence entre les art√®res et les veines?",
                        options: ["Il n'y a pas de diff√©rence", "Les art√®res transportent le sang du c≈ìur vers le corps; les veines ram√®nent le sang vers le c≈ìur", "Les art√®res sont bleues et les veines sont rouges", "Les art√®res ne transportent que de l'eau"],
                        correct: 1,
                        explanation: "Les art√®res transportent le sang riche en oxyg√®ne du c≈ìur vers le corps. Les veines ram√®nent le sang pauvre en oxyg√®ne du corps vers le c≈ìur."
                    },
                    {
                        question: "Qu'est-ce que le syst√®me musculosquelettique?",
                        options: ["Le syst√®me qui dig√®re les aliments", "Le syst√®me compos√© des os (squelette) et des muscles qui permettent le mouvement et le soutien", "Le syst√®me qui fait circuler le sang", "Le syst√®me qui contr√¥le les pens√©es"],
                        correct: 1,
                        explanation: "Le syst√®me musculosquelettique comprend les os (qui soutiennent et prot√®gent) et les muscles (qui permettent le mouvement)."
                    },
                    {
                        question: "Comment le syst√®me circulatoire et le syst√®me respiratoire travaillent-ils ensemble?",
                        options: ["Ils ne travaillent pas ensemble", "Les poumons mettent l'oxyg√®ne dans le sang, et le c≈ìur pompe ce sang riche en oxyg√®ne vers tout le corps", "Le c≈ìur aide les poumons √† dig√©rer", "Les poumons pompent le sang"],
                        correct: 1,
                        explanation: "Le syst√®me respiratoire met l'oxyg√®ne dans le sang (dans les poumons). Le syst√®me circulatoire transporte ensuite ce sang riche en oxyg√®ne vers toutes les cellules du corps."
                    },
                    {
                        question: "Comment le syst√®me digestif et le syst√®me circulatoire travaillent-ils ensemble?",
                        options: ["Ils ne sont pas connect√©s", "Le syst√®me digestif d√©compose les aliments en nutriments, et le syst√®me circulatoire transporte ces nutriments vers les cellules du corps", "Le c≈ìur aide √† m√¢cher les aliments", "L'estomac pompe le sang"],
                        correct: 1,
                        explanation: "L'intestin gr√™le absorbe les nutriments des aliments dig√©r√©s. Ces nutriments passent dans le sang, et le syst√®me circulatoire les distribue √† toutes les cellules du corps."
                    },
                    {
                        question: "Comment les plantes transportent-elles l'eau des racines vers les feuilles?",
                        options: ["Par leurs fleurs", "Par des tubes appel√©s xyl√®me", "L'eau ne se d√©place pas dans les plantes", "Par leurs graines"],
                        correct: 1,
                        explanation: "Le xyl√®me est un syst√®me de tubes dans les plantes qui transporte l'eau et les min√©raux des racines vers les feuilles et les autres parties de la plante."
                    },
                    {
                        question: "Comment les plantes transportent-elles les sucres (nourriture) des feuilles vers les autres parties?",
                        options: ["Par le xyl√®me", "Par des tubes appel√©s phlo√®me", "Les plantes ne fabriquent pas de nourriture", "Par leurs racines seulement"],
                        correct: 1,
                        explanation: "Le phlo√®me est le syst√®me de tubes qui transporte les sucres (produits par la photosynth√®se dans les feuilles) vers toutes les autres parties de la plante."
                    },
                    {
                        question: "Quel organe du corps humain √©limine les d√©chets du sang?",
                        options: ["Le c≈ìur", "Les poumons", "Les reins", "L'estomac"],
                        correct: 2,
                        explanation: "Les reins filtrent le sang et √©liminent les d√©chets sous forme d'urine."
                    },
                    {
                        question: "Quel r√¥le jouent les os dans le corps humain?",
                        options: ["Seulement permettre le mouvement", "Soutenir le corps, prot√©ger les organes et produire des cellules sanguines", "Dig√©rer les aliments", "Transporter l'oxyg√®ne"],
                        correct: 1,
                        explanation: "Les os soutiennent la structure du corps, prot√®gent les organes vitaux (le cr√¢ne prot√®ge le cerveau, les c√¥tes prot√®gent le c≈ìur et les poumons) et la moelle osseuse produit des cellules sanguines."
                    }
                ],
                xpPerQuestion: 5
            },

            // UNIT 5: Espace (Space)
            'espace': {
                id: "science-espace",
                title: "üåå Espace",
                subject: "Science",
                questions: [
                    {
                        question: "Qu'est-ce qui cause le jour et la nuit sur la Terre?",
                        options: ["La Terre qui tourne autour du Soleil", "La rotation de la Terre sur son axe (un tour en ~24 heures)", "La Lune qui bloque le Soleil", "Le Soleil qui s'√©teint la nuit"],
                        correct: 1,
                        explanation: "Le jour et la nuit sont caus√©s par la rotation de la Terre sur son axe. La moiti√© de la Terre face au Soleil a le jour; l'autre moiti√© a la nuit."
                    },
                    {
                        question: "Pourquoi avons-nous des saisons sur la Terre?",
                        options: ["Parce que la Terre se rapproche et s'√©loigne du Soleil", "Parce que l'axe de la Terre est inclin√© d'environ 23,5¬∞", "Parce que le Soleil change de taille", "Parce que la Lune bloque la lumi√®re du Soleil"],
                        correct: 1,
                        explanation: "L'inclinaison de l'axe de la Terre (23,5¬∞) fait que diff√©rentes parties de la Terre re√ßoivent plus ou moins de lumi√®re directe du Soleil au cours de l'ann√©e, cr√©ant les saisons."
                    },
                    {
                        question: "Quand c'est l'√©t√© dans l'h√©misph√®re nord, pourquoi les jours sont-ils plus longs?",
                        options: ["La Terre tourne plus lentement", "L'h√©misph√®re nord est inclin√© vers le Soleil, recevant plus d'heures de lumi√®re", "Le Soleil brille plus fort", "La Lune est plus loin"],
                        correct: 1,
                        explanation: "En √©t√©, l'h√©misph√®re nord est inclin√© vers le Soleil. Cela signifie plus d'heures d'ensoleillement (jours plus longs) et des rayons plus directs (plus chaud)."
                    },
                    {
                        question: "Quelles sont les phases de la Lune?",
                        options: ["Les changements de taille r√©elle de la Lune", "Les diff√©rentes apparences de la Lune vue de la Terre selon sa position par rapport au Soleil", "Les couleurs que la Lune prend", "Les moments o√π la Lune dispara√Æt"],
                        correct: 1,
                        explanation: "Les phases de la Lune sont les diff√©rentes apparences de la partie illumin√©e de la Lune, selon sa position relative par rapport √† la Terre et au Soleil."
                    },
                    {
                        question: "Combien de temps dure un cycle complet des phases de la Lune?",
                        options: ["Environ 7 jours", "Environ 29,5 jours", "Environ 365 jours", "Environ 24 heures"],
                        correct: 1,
                        explanation: "Un cycle lunaire complet (de nouvelle lune √† nouvelle lune) dure environ 29,5 jours."
                    },
                    {
                        question: "Qu'est-ce qu'une √©clipse solaire?",
                        options: ["Quand la Terre bloque la lumi√®re du Soleil sur la Lune", "Quand la Lune passe entre la Terre et le Soleil, bloquant la lumi√®re du Soleil", "Quand le Soleil dispara√Æt", "Quand deux plan√®tes se rencontrent"],
                        correct: 1,
                        explanation: "Une √©clipse solaire se produit quand la Lune passe entre la Terre et le Soleil, projetant une ombre sur la Terre et bloquant partiellement ou totalement la lumi√®re du Soleil."
                    },
                    {
                        question: "Qu'est-ce qu'une √©clipse lunaire?",
                        options: ["Quand la Lune passe entre la Terre et le Soleil", "Quand la Terre passe entre le Soleil et la Lune, projetant son ombre sur la Lune", "Quand la Lune devient plus grosse", "Quand la Lune tourne sur elle-m√™me"],
                        correct: 1,
                        explanation: "Une √©clipse lunaire se produit quand la Terre se trouve entre le Soleil et la Lune, et l'ombre de la Terre est projet√©e sur la Lune."
                    },
                    {
                        question: "Que sont les aurores bor√©ales?",
                        options: ["Des √©toiles filantes", "Des lumi√®res color√©es dans le ciel caus√©es par l'interaction de particules solaires avec l'atmosph√®re terrestre", "Des reflets de la Lune", "Des feux d'artifice naturels"],
                        correct: 1,
                        explanation: "Les aurores bor√©ales sont des lumi√®res color√©es visibles dans le ciel nocturne, caus√©es par des particules charg√©es du Soleil (vent solaire) qui interagissent avec les gaz de l'atmosph√®re terrestre."
                    },
                    {
                        question: "Qu'est-ce qu'une constellation?",
                        options: ["Une plan√®te", "Un groupe d'√©toiles qui forme un motif reconnaissable dans le ciel nocturne", "Un satellite artificiel", "Un type de nuage"],
                        correct: 1,
                        explanation: "Une constellation est un groupe d'√©toiles qui, vues de la Terre, semblent former un motif ou une figure reconnaissable (comme la Grande Ourse)."
                    },
                    {
                        question: "Pourquoi les constellations visibles changent-elles selon les saisons?",
                        options: ["Les √©toiles se d√©placent", "La Terre orbite autour du Soleil, donc notre vue du ciel nocturne change", "Les constellations disparaissent en √©t√©", "La Lune les cache"],
                        correct: 1,
                        explanation: "Au fil de l'ann√©e, la Terre se d√©place autour du Soleil. Cela change la direction vers laquelle nous regardons la nuit, nous montrant diff√©rentes parties du ciel et diff√©rentes constellations."
                    },
                    {
                        question: "Qu'est-ce que le ¬´soleil de minuit¬ª?",
                        options: ["Une √©toile qui brille √† minuit", "Un ph√©nom√®ne o√π le Soleil reste visible 24 heures par jour dans les r√©gions polaires en √©t√©", "Le Soleil qui est plus brillant la nuit", "Un type de Lune"],
                        correct: 1,
                        explanation: "Le soleil de minuit est un ph√©nom√®ne qui se produit dans les r√©gions proches des p√¥les en √©t√©, o√π le Soleil ne se couche pas pendant 24 heures √† cause de l'inclinaison de l'axe terrestre."
                    },
                    {
                        question: "Comment les peuples autochtones utilisaient-ils l'observation des √©toiles et des ph√©nom√®nes astronomiques?",
                        options: ["Ils ne regardaient jamais le ciel", "Pour d√©terminer les saisons, planifier l'agriculture, la chasse et les d√©placements", "Seulement pour le divertissement", "Pour pr√©dire les r√©sultats de jeux"],
                        correct: 1,
                        explanation: "Les peuples autochtones observaient les √©toiles, la Lune et les ph√©nom√®nes astronomiques pour d√©terminer les saisons, planifier les p√©riodes de plantation, de r√©colte, de chasse et de migration."
                    },
                    {
                        question: "Combien de temps la Terre prend-elle pour faire un tour complet autour du Soleil?",
                        options: ["24 heures", "30 jours", "Environ 365,25 jours (1 an)", "29,5 jours"],
                        correct: 2,
                        explanation: "La Terre prend environ 365,25 jours (une ann√©e) pour compl√©ter une orbite autour du Soleil."
                    },
                    {
                        question: "Quelle est la ¬´nuit polaire¬ª?",
                        options: ["Une nuit tr√®s froide", "Un ph√©nom√®ne o√π le Soleil ne se l√®ve pas pendant 24 heures dans les r√©gions polaires en hiver", "Une √©clipse qui dure toute la nuit", "Une nuit avec beaucoup d'√©toiles"],
                        correct: 1,
                        explanation: "La nuit polaire est le ph√©nom√®ne oppos√© au soleil de minuit: dans les r√©gions proches des p√¥les en hiver, le Soleil ne se l√®ve pas pendant 24 heures ou plus."
                    },
                    {
                        question: "Quelle phase de la Lune voit-on quand la Lune est compl√®tement illumin√©e?",
                        options: ["Nouvelle lune", "Premier quartier", "Pleine lune", "Dernier quartier"],
                        correct: 2,
                        explanation: "La pleine lune est la phase o√π la face enti√®re de la Lune visible depuis la Terre est illumin√©e par le Soleil."
                    }
                ],
                xpPerQuestion: 5
            },

            // UNIT 6: Informatique (Computer Science)
            'informatique': {
                id: "science-informatique",
                title: "üíª Informatique",
                subject: "Science",
                questions: [
                    {
                        question: "Qu'est-ce qu'un algorithme?",
                        options: ["Un type d'ordinateur", "Une s√©rie d'√©tapes ordonn√©es pour r√©soudre un probl√®me ou accomplir une t√¢che", "Un jeu vid√©o", "Un c√¢ble d'ordinateur"],
                        correct: 1,
                        explanation: "Un algorithme est une suite d'instructions pr√©cises et ordonn√©es qui permettent de r√©soudre un probl√®me ou d'accomplir une t√¢che."
                    },
                    {
                        question: "Qu'est-ce qu'un bloc de code dans la programmation visuelle?",
                        options: ["Un bloc de construction en plastique", "Une pi√®ce de puzzle color√©e qui repr√©sente une instruction informatique", "Un livre de codes", "Un mot de passe"],
                        correct: 1,
                        explanation: "Dans la programmation visuelle par blocs (comme Scratch), chaque bloc repr√©sente une instruction ou une commande. On assemble les blocs comme des pi√®ces de puzzle pour cr√©er un programme."
                    },
                    {
                        question: "Qu'est-ce qu'une boucle en programmation?",
                        options: ["Une erreur dans le code", "Une instruction qui r√©p√®te un ensemble de commandes un certain nombre de fois ou jusqu'√† ce qu'une condition soit remplie", "Un c√¢ble circulaire", "Un type de fichier"],
                        correct: 1,
                        explanation: "Une boucle permet de r√©p√©ter automatiquement un ensemble d'instructions. Par exemple, ¬´r√©p√©ter 5 fois: avancer de 10 pas¬ª ex√©cute l'action 5 fois sans avoir √† l'√©crire 5 fois."
                    },
                    {
                        question: "Si un bloc de code dit ¬´avancer de 10 pas¬ª et est plac√© dans une boucle ¬´r√©p√©ter 4 fois¬ª, combien de pas au total le personnage fera-t-il?",
                        options: ["10 pas", "14 pas", "40 pas", "4 pas"],
                        correct: 2,
                        explanation: "La boucle r√©p√®te l'action 4 fois: 10 + 10 + 10 + 10 = 40 pas au total."
                    },
                    {
                        question: "Qu'est-ce que le processus de conception (design process)?",
                        options: ["Dessiner une image", "Un processus it√©ratif: identifier un besoin, planifier, cr√©er, tester, am√©liorer", "Copier le travail de quelqu'un d'autre", "Acheter un produit en magasin"],
                        correct: 1,
                        explanation: "Le processus de conception est un cycle: identifier un probl√®me/besoin ‚Üí planifier une solution ‚Üí cr√©er un prototype ‚Üí tester ‚Üí √©valuer ‚Üí am√©liorer ‚Üí recommencer si n√©cessaire."
                    },
                    {
                        question: "Qu'est-ce qu'un art√©fact computationnel?",
                        options: ["Un objet ancien trouv√© par des arch√©ologues", "Quelque chose cr√©√© par un humain en utilisant un ordinateur (programme, animation, site web, etc.)", "Un ordinateur cass√©", "Un livre √©crit √† la main"],
                        correct: 1,
                        explanation: "Un art√©fact computationnel est tout ce qui est cr√©√© √† l'aide d'un ordinateur pour r√©pondre √† un besoin: un programme, une animation, un jeu, un site web, une simulation, etc."
                    },
                    {
                        question: "Pourquoi est-il important de cr√©er plusieurs versions (it√©rations) d'un art√©fact?",
                        options: ["Pour perdre du temps", "Pour am√©liorer le produit √† chaque version en corrigeant les probl√®mes et en ajoutant des am√©liorations", "Ce n'est pas important", "Parce que le professeur l'exige"],
                        correct: 1,
                        explanation: "Chaque it√©ration permet de tester, identifier les probl√®mes et am√©liorer l'art√©fact. Rarement un premier essai est parfait ‚Äî l'am√©lioration continue m√®ne √† un meilleur produit final."
                    },
                    {
                        question: "Que se passera-t-il si on ex√©cute ces blocs de code dans l'ordre: ¬´avancer de 5 pas¬ª puis ¬´tourner √† droite de 90 degr√©s¬ª?",
                        options: ["Le personnage avancera et tournera en m√™me temps", "Le personnage avancera de 5 pas, puis tournera √† droite", "Le personnage ne bougera pas", "Le personnage tournera d'abord puis avancera"],
                        correct: 1,
                        explanation: "Les blocs de code s'ex√©cutent dans l'ordre (s√©quentiellement). D'abord le personnage avance de 5 pas, puis il tourne √† droite de 90 degr√©s."
                    },
                    {
                        question: "Comment la collaboration peut-elle am√©liorer un art√©fact?",
                        options: ["En ayant une seule personne qui fait tout", "En partageant diff√©rentes id√©es, perspectives et comp√©tences pour trouver de meilleures solutions", "En copiant le travail des autres", "La collaboration n'aide pas"],
                        correct: 1,
                        explanation: "La collaboration permet de combiner diff√©rentes id√©es, perspectives et comp√©tences. D'autres personnes peuvent voir des probl√®mes ou des am√©liorations que l'on n'aurait pas vus seul."
                    },
                    {
                        question: "Pour dessiner un carr√© avec un programme par blocs, quel algorithme utiliserais-tu?",
                        options: ["Avancer, tourner 45¬∞, r√©p√©ter 8 fois", "Avancer, tourner 90¬∞, r√©p√©ter 4 fois", "Avancer, tourner 60¬∞, r√©p√©ter 6 fois", "Avancer, tourner 180¬∞, r√©p√©ter 2 fois"],
                        correct: 1,
                        explanation: "Un carr√© a 4 c√¥t√©s et 4 angles de 90¬∞. L'algorithme est: r√©p√©ter 4 fois (avancer + tourner de 90¬∞)."
                    }
                ],
                xpPerQuestion: 5
            },

            // UNIT 7: M√©thodes scientifiques (Scientific Methods)
            'methodes': {
                id: "science-methodes",
                title: "üî¨ M√©thodes scientifiques",
                subject: "Science",
                questions: [
                    {
                        question: "Quelles sont les √©tapes de la m√©thode scientifique dans le bon ordre?",
                        options: ["Conclure ‚Üí Observer ‚Üí Exp√©rimenter ‚Üí Questionner", "Observer/Questionner ‚Üí Formuler une hypoth√®se ‚Üí Exp√©rimenter ‚Üí Analyser les r√©sultats ‚Üí Conclure", "Exp√©rimenter ‚Üí Observer ‚Üí Conclure ‚Üí Questionner", "Hypoth√®se ‚Üí Conclure ‚Üí Observer ‚Üí Exp√©rimenter"],
                        correct: 1,
                        explanation: "La m√©thode scientifique suit ces √©tapes: 1) Observer et poser une question 2) Formuler une hypoth√®se 3) Planifier et r√©aliser une exp√©rience 4) Recueillir et analyser les donn√©es 5) Tirer une conclusion."
                    },
                    {
                        question: "Qu'est-ce qu'une exp√©rience contr√¥l√©e?",
                        options: ["Une exp√©rience o√π on change tout en m√™me temps", "Une exp√©rience o√π on change une seule variable √† la fois et garde tout le reste pareil", "Une exp√©rience sans mat√©riel", "Une exp√©rience faite par un adulte seulement"],
                        correct: 1,
                        explanation: "Dans une exp√©rience contr√¥l√©e, on ne change qu'une seule variable (la variable manipul√©e) et on garde toutes les autres conditions identiques pour que le test soit juste."
                    },
                    {
                        question: "Qu'est-ce que la variable manipul√©e (ind√©pendante)?",
                        options: ["Ce que tu mesures √† la fin de l'exp√©rience", "Ce que tu changes intentionnellement dans l'exp√©rience", "Ce que tu gardes pareil", "Le titre de l'exp√©rience"],
                        correct: 1,
                        explanation: "La variable manipul√©e (ind√©pendante) est le facteur que le scientifique change intentionnellement pour observer son effet."
                    },
                    {
                        question: "Qu'est-ce que la variable r√©pondante (d√©pendante)?",
                        options: ["Ce que tu changes dans l'exp√©rience", "Ce que tu observes ou mesures comme r√©sultat de l'exp√©rience", "Ce que tu gardes pareil", "L'hypoth√®se"],
                        correct: 1,
                        explanation: "La variable r√©pondante (d√©pendante) est ce que tu observes ou mesures. Elle ¬´r√©pond¬ª aux changements de la variable manipul√©e."
                    },
                    {
                        question: "Qu'est-ce qu'une variable contr√¥l√©e?",
                        options: ["La variable que tu changes", "La variable que tu mesures", "Tous les facteurs que tu gardes les m√™mes pendant l'exp√©rience pour que le test soit juste", "Le r√©sultat final"],
                        correct: 2,
                        explanation: "Les variables contr√¥l√©es sont tous les facteurs que tu gardes identiques pendant l'exp√©rience. Cela assure que seul le changement de la variable manipul√©e affecte les r√©sultats."
                    },
                    {
                        question: "Dans une exp√©rience sur la croissance des plantes, tu changes la quantit√© de lumi√®re. Quelle est la variable manipul√©e?",
                        options: ["La croissance de la plante", "La quantit√© d'eau", "La quantit√© de lumi√®re", "Le type de sol"],
                        correct: 2,
                        explanation: "La quantit√© de lumi√®re est la variable manipul√©e car c'est ce que tu changes intentionnellement. La croissance de la plante serait la variable r√©pondante."
                    },
                    {
                        question: "Qu'est-ce qu'un biais dans une investigation scientifique?",
                        options: ["Un r√©sultat correct", "Une pr√©f√©rence ou un pr√©jug√© qui peut influencer les r√©sultats de mani√®re injuste", "Un type d'instrument", "Une hypoth√®se"],
                        correct: 1,
                        explanation: "Un biais est une pr√©f√©rence, un pr√©jug√© ou une erreur syst√©matique qui peut fausser les r√©sultats d'une investigation. Les scientifiques doivent identifier et minimiser les biais."
                    },
                    {
                        question: "Donne un exemple de biais dans une exp√©rience.",
                        options: ["Utiliser le m√™me instrument pour toutes les mesures", "Ne mesurer que les r√©sultats qui confirment ton hypoth√®se et ignorer les autres", "R√©p√©ter l'exp√©rience plusieurs fois", "Enregistrer tous les r√©sultats avec pr√©cision"],
                        correct: 1,
                        explanation: "Ignorer les r√©sultats qui ne confirment pas ton hypoth√®se est un biais de confirmation. Un bon scientifique enregistre TOUS les r√©sultats, m√™me ceux qui contredisent son hypoth√®se."
                    },
                    {
                        question: "Pourquoi l'√©thique est-elle importante en science?",
                        options: ["Elle n'est pas importante", "Pour s'assurer que la recherche est honn√™te, juste, respectueuse et ne cause pas de tort", "Pour rendre les exp√©riences plus difficiles", "Pour que les scientifiques gagnent plus d'argent"],
                        correct: 1,
                        explanation: "L'√©thique scientifique assure que la recherche est conduite de mani√®re honn√™te (pas de falsification), respectueuse (envers les √™tres vivants), et que les r√©sultats sont rapport√©s avec pr√©cision."
                    },
                    {
                        question: "Quel est un exemple d'√©thique scientifique en classe?",
                        options: ["Copier les r√©sultats d'un autre √©l√®ve", "Enregistrer honn√™tement tous les r√©sultats, m√™me s'ils ne correspondent pas √† l'hypoth√®se", "Changer les donn√©es pour avoir une meilleure note", "Ignorer les consignes de s√©curit√©"],
                        correct: 1,
                        explanation: "L'√©thique scientifique inclut l'honn√™tet√©: enregistrer tous les r√©sultats fid√®lement, ne pas inventer ou modifier des donn√©es, et traiter le mat√©riel et les √™tres vivants avec respect."
                    },
                    {
                        question: "Pourquoi est-il important de repr√©senter les donn√©es de diff√©rentes fa√ßons (graphiques, tableaux, diagrammes)?",
                        options: ["Pour rendre le travail plus joli", "Diff√©rentes repr√©sentations aident √† communiquer les r√©sultats clairement et √† voir des tendances", "Ce n'est pas important", "Parce que le professeur l'exige"],
                        correct: 1,
                        explanation: "Diff√©rentes repr√©sentations (graphiques √† barres, diagrammes circulaires, tableaux) permettent de mieux voir les tendances dans les donn√©es et de communiquer les r√©sultats de mani√®re claire."
                    },
                    {
                        question: "Quelles technologies aident les scientifiques √† observer ce que les sens humains ne peuvent pas d√©tecter?",
                        options: ["Des crayons et du papier", "Des microscopes, t√©lescopes, capteurs et satellites", "Des livres de cuisine", "Des instruments de musique"],
                        correct: 1,
                        explanation: "Les microscopes permettent de voir de tr√®s petits objets, les t√©lescopes de voir des objets √©loign√©s dans l'espace, les capteurs de d√©tecter des changements invisibles, et les satellites de surveiller la Terre depuis l'espace."
                    },
                    {
                        question: "Que signifie ¬´d√©fendre une conclusion¬ª en science?",
                        options: ["Se battre avec un autre scientifique", "Expliquer pourquoi ta conclusion est soutenue par les preuves de ton exp√©rience", "Cacher ta conclusion", "Changer ta conclusion pour qu'elle plaise aux autres"],
                        correct: 1,
                        explanation: "D√©fendre une conclusion signifie expliquer et justifier ta conclusion en utilisant les donn√©es et les preuves recueillies pendant l'exp√©rience."
                    },
                    {
                        question: "Que pourrait-il arriver si les preuves scientifiques ne sont pas communiqu√©es clairement?",
                        options: ["Rien de grave", "Les gens pourraient mal interpr√©ter les r√©sultats et prendre de mauvaises d√©cisions", "Les scientifiques gagneraient plus d'argent", "L'exp√©rience serait automatiquement r√©ussie"],
                        correct: 1,
                        explanation: "Si les preuves ne sont pas communiqu√©es clairement et pr√©cis√©ment, les gens pourraient mal comprendre les r√©sultats, ce qui pourrait mener √† de mauvaises d√©cisions en sant√©, environnement, etc."
                    },
                    {
                        question: "Qu'est-ce qu'une hypoth√®se?",
                        options: ["Un fait prouv√©", "Une pr√©diction testable qui propose une explication possible", "Le r√©sultat final d'une exp√©rience", "Une question sans r√©ponse"],
                        correct: 1,
                        explanation: "Une hypoth√®se est une pr√©diction testable, souvent formul√©e sous la forme ¬´Si... alors... parce que...¬ª. Elle propose une explication qui peut √™tre v√©rifi√©e par une exp√©rience."
                    }
                ],
                xpPerQuestion: 5
            }
        };

        // Currently selected science unit
        let selectedScienceUnit = 'matiere';

        // Get science lesson by unit
        function getScienceLesson(unitId) {
            return scienceUnits[unitId];
        }

        // Generate speedrun science lesson (10 questions from all units)
        function generateSpeedrunScienceLesson() {
            const allQuestions = [];
            Object.values(scienceUnits).forEach(unit => {
                allQuestions.push(...unit.questions);
            });
            const shuffled = shuffle([...allQuestions]);
            return {
                id: "speedrun-science",
                title: "‚ö° Speed Science",
                subject: "Science",
                questions: shuffled.slice(0, SPEEDRUN_QUESTIONS)
            };
        }

        // ===========================================
        // GAME MODE SYSTEM
        // ===========================================
        
        // Mode state variables
        let currentMode = 'learn';          // 'learn', 'speedrun', 'fun', 'challenge'
        let pendingSubject = null;          // 'math' or 'science'
        let currentLessonData = null;       // Store current lesson
        
        // Speedrun variables
        let timerInterval = null;
        let timerStartTime = null;
        let finalTime = 0;
        let speedrunTimeLeft = 10;       // Countdown starts at 10 seconds
        let speedrunQuestionNum = 0;     // Track which question we're on
        const SPEEDRUN_QUESTIONS = 10;   // 10 questions in speedrun
        
        // Challenge variables
        let livesRemaining = 3;
        const MAX_LIVES = 3;
        
        // Fun mode messages
        const celebrationEmojis = ['üéâ', 'üéä', '‚≠ê', 'üî•', 'üí™', 'üåü', 'üöÄ', 'üéØ'];
        const celebrationMessages = [
            'Amazing!', 'You\'re on fire!', 'Brilliant!', 'Keep it up!',
            'Fantastic!', 'Super smart!', 'Wow!', 'Nailed it!', 'Perfect!'
        ];
        
        // Mode badge labels
        const modeBadges = {
            learn: 'üìö Learn',
            speedrun: '‚è±Ô∏è Speed',
            fun: 'üéâ Fun',
            challenge: 'üí™ Challenge'
        };

        // ===========================================
        // SCREEN NAVIGATION
        // ===========================================
        
        // Show subject selection screen
        function showSubjectSelection() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('subject-screen').classList.remove('hidden');
        }

        // Select subject and show mode selection (for Math)
        function selectSubject(subject) {
            pendingSubject = subject;
            document.getElementById('subject-screen').classList.add('hidden');
            document.getElementById('mode-screen').classList.remove('hidden');
        }

        // Show Science units selection
        function showScienceUnits() {
            document.getElementById('subject-screen').classList.add('hidden');
            document.getElementById('science-units-screen').classList.remove('hidden');
        }

        // Select a Science unit and go to mode selection
        function selectScienceUnit(unitId) {
            pendingSubject = 'science';
            selectedScienceUnit = unitId;
            document.getElementById('science-units-screen').classList.add('hidden');
            document.getElementById('mode-screen').classList.remove('hidden');
        }

        // Go back from science units to subjects
        function backToSubjectsFromUnits() {
            document.getElementById('science-units-screen').classList.add('hidden');
            document.getElementById('subject-screen').classList.remove('hidden');
        }

        // Start the lesson with selected mode
        function startMode(mode) {
            currentMode = mode;
            
            // Generate lesson data based on subject and mode
            if (currentMode === 'speedrun') {
                // Speedrun always has 10 questions
                if (pendingSubject === 'math') {
                    currentLessonData = generateSpeedrunMathLesson();
                } else {
                    currentLessonData = generateSpeedrunScienceLesson();
                }
            } else if (pendingSubject === 'math') {
                currentLessonData = generateMathLesson();
            } else {
                // Get the selected science unit
                currentLessonData = getScienceLesson(selectedScienceUnit);
            }
            
            // Reset mode-specific states
            resetModeState();
            
            // Show lesson screen
            document.getElementById('mode-screen').classList.add('hidden');
            document.getElementById('lesson-screen').classList.remove('hidden');
            document.getElementById('question-card').classList.remove('hidden');
            document.getElementById('completion-card').classList.add('hidden');
            document.getElementById('gameover-card').classList.add('hidden');
            
            // Setup mode-specific UI
            setupModeUI();
            
            // Start the lesson
            document.getElementById('lesson-title').textContent = currentLessonData.title;
            updateLessonStats();
            initLesson(currentLessonData);
            
            // Start timer if speedrun
            if (currentMode === 'speedrun') {
                startTimer();
            }
        }
        
        // Reset mode-specific state
        function resetModeState() {
            // Reset timer
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            timerStartTime = null;
            finalTime = 0;
            
            // Reset speedrun
            speedrunTimeLeft = 10;
            speedrunQuestionNum = 0;
            
            // Reset lives
            livesRemaining = MAX_LIVES;
        }
        
        // Setup UI elements based on current mode
        function setupModeUI() {
            const timerDisplay = document.getElementById('timer-display');
            const livesDisplay = document.getElementById('lives-display');
            const modeBadge = document.getElementById('mode-badge');
            
            // Hide all mode-specific elements first
            timerDisplay.classList.add('hidden');
            livesDisplay.classList.add('hidden');
            
            // Set mode badge
            modeBadge.textContent = modeBadges[currentMode];
            
            // Show mode-specific elements
            if (currentMode === 'speedrun') {
                timerDisplay.classList.remove('hidden');
                document.getElementById('timer-value').textContent = '10.0s';
            } else if (currentMode === 'challenge') {
                livesDisplay.classList.remove('hidden');
                updateLivesDisplay();
            }
        }

        // Go back to subject selection (or science units)
        function backToSubjects() {
            stopTimer();
            document.getElementById('mode-screen').classList.add('hidden');
            document.getElementById('lesson-screen').classList.add('hidden');
            // If science, go back to science units
            if (pendingSubject === 'science') {
                document.getElementById('science-units-screen').classList.remove('hidden');
            } else {
                document.getElementById('subject-screen').classList.remove('hidden');
            }
        }
        
        // Go back to mode selection
        function backToModes() {
            stopTimer();
            document.getElementById('lesson-screen').classList.add('hidden');
            document.getElementById('mode-screen').classList.remove('hidden');
        }

        // Return to main menu
        function returnToMenu() {
            stopTimer();
            document.getElementById('lesson-screen').classList.add('hidden');
            document.getElementById('subject-screen').classList.add('hidden');
            document.getElementById('science-units-screen').classList.add('hidden');
            document.getElementById('mode-screen').classList.add('hidden');
            document.getElementById('main-menu').classList.remove('hidden');
            updateStatsDisplay();
        }

        // ===========================================
        // SPEEDRUN MODE - Countdown Timer
        // ===========================================
        
        // Generate 10-question math lesson for speedrun
        function generateSpeedrunMathLesson() {
            const questions = [];
            for (let i = 0; i < SPEEDRUN_QUESTIONS; i++) {
                questions.push(generateQuestion());
            }
            return {
                id: "speedrun-math",
                title: "‚ö° Speed Math",
                subject: "Math",
                questions: questions
            };
        }
        
        // Generate 10-question weather lesson for speedrun
        function generateSpeedrunWeatherLesson() {
            const shuffled = shuffle([...weatherQuestionBank]);
            return {
                id: "speedrun-weather",
                title: "‚ö° Speed Science",
                subject: "Science",
                questions: shuffled.slice(0, SPEEDRUN_QUESTIONS)
            };
        }
        
        function startTimer() {
            speedrunQuestionNum = 0;
            speedrunTimeLeft = 10; // First question: 10 seconds
            timerStartTime = Date.now();
            timerInterval = setInterval(updateCountdown, 100);
        }
        
        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            return speedrunQuestionNum; // Return how many questions answered
        }
        
        function updateCountdown() {
            if (timerStartTime) {
                const elapsed = (Date.now() - timerStartTime) / 1000;
                const remaining = speedrunTimeLeft - elapsed;
                
                if (remaining <= 0) {
                    // Time's up!
                    document.getElementById('timer-value').textContent = '0.0s';
                    stopTimer();
                    showSpeedrunTimeOut();
                } else {
                    document.getElementById('timer-value').textContent = remaining.toFixed(1) + 's';
                    
                    // Flash red when low on time
                    const timerEl = document.getElementById('timer-display');
                    if (remaining <= 3) {
                        timerEl.classList.add('timer-danger');
                    } else {
                        timerEl.classList.remove('timer-danger');
                    }
                }
            }
        }
        
        // Called when moving to next question in speedrun
        function nextSpeedrunQuestion() {
            speedrunQuestionNum++;
            speedrunTimeLeft = Math.max(1, 10 - speedrunQuestionNum); // 10, 9, 8... min 1 second
            timerStartTime = Date.now(); // Reset timer for new question
            document.getElementById('timer-display').classList.remove('timer-danger');
        }
        
        function showSpeedrunTimeOut() {
            document.getElementById('question-card').classList.add('hidden');
            document.getElementById('gameover-card').classList.remove('hidden');
            document.getElementById('gameover-card').querySelector('h2').textContent = "Time's Up!";
            document.getElementById('gameover-card').querySelector('.icon').textContent = '‚è∞';
            document.getElementById('gameover-score').textContent = 
                `You answered ${correctAnswers} of ${speedrunQuestionNum + 1} questions`;
            document.querySelector('.gameover-message').textContent = 'You ran out of time!';
        }
        
        function calculateSpeedBonus(questionsCompleted) {
            // Bonus for completing all 10 questions
            if (questionsCompleted >= 10) return 15;
            if (questionsCompleted >= 7) return 10;
            if (questionsCompleted >= 5) return 5;
            return 0;
        }

        // ===========================================
        // CHALLENGE MODE - Lives
        // ===========================================
        
        function updateLivesDisplay() {
            const hearts = '‚ù§Ô∏è'.repeat(livesRemaining) + 'üíî'.repeat(MAX_LIVES - livesRemaining);
            document.getElementById('lives-hearts').textContent = hearts;
        }
        
        function loseLife() {
            livesRemaining--;
            updateLivesDisplay();
            
            // Shake animation
            const heartsEl = document.getElementById('lives-hearts');
            heartsEl.classList.add('shake');
            setTimeout(() => heartsEl.classList.remove('shake'), 500);
            
            return livesRemaining > 0;
        }
        
        function calculateChallengeBonus(lives) {
            if (lives === 3) return 15;
            if (lives === 2) return 10;
            if (lives === 1) return 5;
            return 0;
        }
        
        function showGameOver() {
            document.getElementById('question-card').classList.add('hidden');
            document.getElementById('gameover-card').classList.remove('hidden');
            document.getElementById('gameover-score').textContent = 
                `You answered ${correctAnswers} question${correctAnswers !== 1 ? 's' : ''} correctly`;
        }

        // ===========================================
        // FUN MODE - Celebrations
        // ===========================================
        
        function showCelebration() {
            const container = document.getElementById('celebration-container');
            const emojiEl = document.getElementById('celebration-emoji');
            const messageEl = document.getElementById('celebration-message');
            
            // Random emoji and message
            const emoji = celebrationEmojis[Math.floor(Math.random() * celebrationEmojis.length)];
            const message = celebrationMessages[Math.floor(Math.random() * celebrationMessages.length)];
            
            emojiEl.textContent = emoji;
            messageEl.textContent = message;
            
            // Show celebration
            container.classList.remove('hidden');
            
            // Spawn confetti
            spawnConfetti();
            
            // Hide after animation
            setTimeout(() => {
                container.classList.add('hidden');
            }, 1000);
        }
        
        function spawnConfetti() {
            const colors = ['#7C3AED', '#EC4899', '#F59E0B', '#22C55E', '#3B82F6', '#EF4444'];
            
            for (let i = 0; i < 20; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = '-10px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDuration = (Math.random() * 1 + 0.5) + 's';
                document.body.appendChild(confetti);
                
                // Remove after animation
                setTimeout(() => confetti.remove(), 1500);
            }
        }
        
        function showWrongAnimation() {
            document.querySelector('.question-card').classList.add('shake-screen');
            setTimeout(() => {
                document.querySelector('.question-card').classList.remove('shake-screen');
            }, 400);
        }

        // ===========================================
        // LESSON STATS
        // ===========================================
        
        // Update stats display on lesson screen
        function updateLessonStats() {
            const xp = getXP();
            const level = getLevel(xp);
            const xpInLevel = getXPInCurrentLevel(xp);
            const xpPercent = (xpInLevel / XP_PER_LEVEL) * 100;

            const levelEl = document.getElementById('lesson-level');
            const xpTextEl = document.getElementById('lesson-xp-text');
            const xpFillEl = document.getElementById('lesson-xp-fill');

            if (levelEl) levelEl.textContent = level;
            if (xpTextEl) xpTextEl.textContent = `${xpInLevel}/${XP_PER_LEVEL}`;
            if (xpFillEl) xpFillEl.style.width = `${xpPercent}%`;
        }

        // Override the default XP award to also update lesson stats
        const originalAwardXP = awardCorrectAnswerXP;
        awardCorrectAnswerXP = function() {
            const result = originalAwardXP();
            updateLessonStats();
            return result;
        };

        // ===========================================
        // THEME SYSTEM
        // ===========================================
        
        // Toggle theme popup menu
        function toggleThemeMenu() {
            const popup = document.getElementById('theme-popup');
            popup.classList.toggle('hidden');
        }

        // Set theme and save to localStorage
        function setTheme(themeName) {
            // Remove all theme classes
            document.body.classList.remove('normal', 'japanese', 'basic', 'dark', 'car', 'retro');
            
            // Add new theme class (normal has no class)
            if (themeName !== 'normal') {
                document.body.classList.add(themeName);
            }
            
            // Save to localStorage
            localStorage.setItem('theme', themeName);
            
            // Close popup
            toggleThemeMenu();
            
            // Update active state
            updateThemeButtons(themeName);
        }

        // Update which theme button looks active
        function updateThemeButtons(activeTheme) {
            document.querySelectorAll('.theme-option').forEach(btn => {
                btn.classList.remove('active');
            });
            const activeBtn = document.querySelector(`[onclick="setTheme('${activeTheme}')"]`);
            if (activeBtn) activeBtn.classList.add('active');
        }

        // Load saved theme on page load
        function loadSavedTheme() {
            const savedTheme = localStorage.getItem('theme') || 'normal';
            document.body.classList.remove('normal', 'japanese', 'basic', 'dark', 'car', 'retro');
            if (savedTheme !== 'normal') {
                document.body.classList.add(savedTheme);
            }
            updateThemeButtons(savedTheme);
        }

        // Initialize theme on page load
        document.addEventListener('DOMContentLoaded', loadSavedTheme);

        // Close popup when clicking outside
        document.addEventListener('click', function(e) {
            const popup = document.getElementById('theme-popup');
            const themeBtn = document.querySelector('.theme-btn');
            if (!popup.contains(e.target) && !themeBtn.contains(e.target)) {
                popup.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
